<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='
  Week 4
  #


  Shell Scripting
  #


  Running Scripts
  #

$ sh myscript
Alternatively, in your myscript.sh file, do the following
#! /bin/sh
chmod u+x myscript # sets &#39;executable&#39; flag on the file
and run it with&mldr;
$ ./myscript

  Positional Parameters
  #

$ ./myscript foo bar baz # come after filename, spaced

$#: Number of arguments (3)
$n: Parameter name (n is the number)

eg. $1 = "foo"


$*: One string with all parameter names

"foo bar baz"


$@: Comma seperated strings for each parameter name

"foo", "bar", "baz"


shift: Shifts Positional Parameters by 1
$# = 2
$1 = "bar"
$2 = "baz"
$* = "bar baz"
# good for looping over parameters



  Example Script
  #

#! /bin/sh
chmod u+x pydelete # sets exec flag on pydelete.sh

dryrun=
verbose=
while [ $# -gt 0 ]; do # while the number of params > 0
  case "$1" in # takes the first parameter/argument
    -n) # if the argument is -n
      dryrun=y # sets the program as a dryrun "doesnt actually delete files"
      ;;
    -v)
      verbose=y # sets the program as verbose "deletes verbosely"
      ;;
    *) # as soon as there is another different parameter, the while loop breaks
      break
  esac # end of case
  shift # basically $# -= 1
done # end of while

for f in "$@" ; do # for each parameter (after remove the arguments)
  case "$f" in # begins case
    *.py) # if the file is .py extension
      [ -n "$verbose" ] && echo "deleting $f" # if user used `-v`
      [ -z "$dryrun" ] && rm "$f" # if user did not use `-n`, then it will delete
      ;;
    *) # any other file extension
      [ -n "$verbose" ] && echo "not deleting $f" # if the user set verbose
  esac # end of case
done # end of for

  exit
  #


Terminates script and/or shell process
Useful for:

Early exit
Non-zero exit codes: exit 1




  Functions
  #


Example definition
myfunc() {
  echo "Hot diggity dog"
}

Example function call
myfunc foo bar baz # positional parameters are now function arguments

Returning
return    # early return
return 1  # with exit code

Variable Scopes

Local variables
myfunc() {
  local x y z
  x=69
  y=351
  z=$(expr $x + $y)
  echo $z
}

Dynamic Scoping
$ cat myscript
x=0
printnum() {
  local x
  echo $x
}
func1() {
  local x
  x=1
  printnum
}
func2() {
  local x
  x=2
  printnum
}
func1 ; func2
$ sh myscript
1 # from func1
2 # from func2





  Feeding multi-line text into stdin
  #

$ cat << EOF # could be any string
﹥Hi I&#39;m Navinn
﹥Variables also work \$x=$x
﹥EOF # tells shell its the end of file
Hi I&#39;m Navinn
Variables also work $x=42069

if end-marker is declared in quotes, $ is no longer special.


  Command Substitution
  #


Run a command and take its stdout in-place
for i in $(cat myfile) ; do 
# if wrapped in double-quotes, `cat myfile` is just one string instead of multiple
  echo "$i"
done



  Environment Variables
  #


Every process has a collection of environment variables

eg. PATH, CLASSPATH, USER, PWD, PS1 etc.
Convention is all caps
Same syntax: eg. $PATH, PATH=...


printenv: prints current env. vars.
$ printenv
HOME=/Users/home
PWD=/Users/home/desktop
PATH=/usr/local/cms/jdk1.8.0_31/bin:/usr/bin:/bin # colon-seperated list of directories
ANDROID_HOME=/Users/home/Library/Android/sdk
SHELL=/bin/bash
...

Creating a new env. var. is different
LOGNAME=navn          # same init
export LOGNAME        # different
export LOGNAME=navinn # alt



  File Attributes
  #


  General Attributes
  #


Size
Type
Last modified time
Last access time
Last change time
Owning user
Owning group
&mldr;


  Unix Account Organization
  #

Two main accounts: user, groups'><meta name=theme-color content="#FFFFFF"><meta property="og:url" content="https://navn.me/notes/CSCB09/Week-4/"><meta property="og:site_name" content="Notes"><meta property="og:title" content="Week 4"><meta property="og:description" content='Week 4 # Shell Scripting # Running Scripts # $ sh myscript Alternatively, in your myscript.sh file, do the following
#! /bin/sh chmod u+x myscript # sets &#39;executable&#39; flag on the file and run it with…
$ ./myscript Positional Parameters # $ ./myscript foo bar baz # come after filename, spaced $#: Number of arguments (3) $n: Parameter name (n is the number) eg. $1 = "foo" $*: One string with all parameter names "foo bar baz" $@: Comma seperated strings for each parameter name "foo", "bar", "baz" shift: Shifts Positional Parameters by 1 $# = 2 $1 = "bar" $2 = "baz" $* = "bar baz" # good for looping over parameters Example Script # #! /bin/sh chmod u+x pydelete # sets exec flag on pydelete.sh dryrun= verbose= while [ $# -gt 0 ]; do # while the number of params > 0 case "$1" in # takes the first parameter/argument -n) # if the argument is -n dryrun=y # sets the program as a dryrun "doesnt actually delete files" ;; -v) verbose=y # sets the program as verbose "deletes verbosely" ;; *) # as soon as there is another different parameter, the while loop breaks break esac # end of case shift # basically $# -= 1 done # end of while for f in "$@" ; do # for each parameter (after remove the arguments) case "$f" in # begins case *.py) # if the file is .py extension [ -n "$verbose" ] && echo "deleting $f" # if user used `-v` [ -z "$dryrun" ] && rm "$f" # if user did not use `-n`, then it will delete ;; *) # any other file extension [ -n "$verbose" ] && echo "not deleting $f" # if the user set verbose esac # end of case done # end of for exit # Terminates script and/or shell process Useful for: Early exit Non-zero exit codes: exit 1 Functions # Example definition myfunc() { echo "Hot diggity dog" } Example function call myfunc foo bar baz # positional parameters are now function arguments Returning return # early return return 1 # with exit code Variable Scopes Local variables myfunc() { local x y z x=69 y=351 z=$(expr $x + $y) echo $z } Dynamic Scoping $ cat myscript x=0 printnum() { local x echo $x } func1() { local x x=1 printnum } func2() { local x x=2 printnum } func1 ; func2 $ sh myscript 1 # from func1 2 # from func2 Feeding multi-line text into stdin # $ cat << EOF # could be any string ﹥Hi I&#39;m Navinn ﹥Variables also work \$x=$x ﹥EOF # tells shell its the end of file Hi I&#39;m Navinn Variables also work $x=42069 if end-marker is declared in quotes, $ is no longer special. Command Substitution # Run a command and take its stdout in-place for i in $(cat myfile) ; do # if wrapped in double-quotes, `cat myfile` is just one string instead of multiple echo "$i" done Environment Variables # Every process has a collection of environment variables eg. PATH, CLASSPATH, USER, PWD, PS1 etc. Convention is all caps Same syntax: eg. $PATH, PATH=... printenv: prints current env. vars. $ printenv HOME=/Users/home PWD=/Users/home/desktop PATH=/usr/local/cms/jdk1.8.0_31/bin:/usr/bin:/bin # colon-seperated list of directories ANDROID_HOME=/Users/home/Library/Android/sdk SHELL=/bin/bash ... Creating a new env. var. is different LOGNAME=navn # same init export LOGNAME # different export LOGNAME=navinn # alt File Attributes # General Attributes # Size Type Last modified time Last access time Last change time Owning user Owning group … Unix Account Organization # Two main accounts: user, groups'><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="cscb09"><meta property="article:published_time" content="2020-06-02T19:14:38+00:00"><meta property="article:modified_time" content="2020-06-02T19:14:38+00:00"><title>Week 4 - cscb09</title><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@420&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel=stylesheet><link rel=manifest href=/notes/manifest.json><link rel=icon href=/notes/favicon.png type=image/x-icon><link rel=stylesheet href=/notes/book.min.a42240bdd4ca9e8f9db17f7c74494f5083da1ebeb901d7458a7aa4ec5d5acbac.css integrity="sha256-pCJAvdTKno+dsX98dElPUIPaHr65AddFinqk7F1ay6w=" crossorigin=anonymous><script defer src=/notes/fuse.min.js></script><script defer src=/notes/en.search.min.ed042990b18b4bf58846c3aeee97d868986dfe7c91b54bb2a6877f3ae58a821b.js integrity="sha256-7QQpkLGLS/WIRsOu7pfYaJht/nyRtUuypod/OuWKghs=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/notes/><img src=/notes/logo.png alt=Logo class=book-icon><span>Notes</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><input type=checkbox id=section-eecd534dc11f03d48ad2e7d87541675c class=toggle>
<label for=section-eecd534dc11f03d48ad2e7d87541675c class=flex><a href=/notes/CSCA48/ class=flex-auto>CSCA48</a></label><ul><li><a href=/notes/CSCA48/final-review/>Final Review</a></li></ul></li><li><input type=checkbox id=section-0ded7730b14c7695e8d77042e371164e class=toggle checked>
<label for=section-0ded7730b14c7695e8d77042e371164e class=flex><a href=/notes/CSCB09/ class=flex-auto>CSCB09</a></label><ul><li><a href=/notes/CSCB09/Week-1/>Week 1</a></li><li><a href=/notes/CSCB09/Week-2/>Week 2</a></li><li><a href=/notes/CSCB09/Week-3/>Week 3</a></li><li><a href=/notes/CSCB09/Week-4/ class=active>Week 4</a></li><li><a href=/notes/CSCB09/Week-5/>Week 5</a></li><li><a href=/notes/CSCB09/Week-6/>Week 6</a></li><li><a href=/notes/CSCB09/Week-7/>Week 7</a></li><li><a href=/notes/CSCB09/Week-8/>Week 8</a></li><li><a href=/notes/CSCB09/Week-9/>Week 9</a></li><li><a href=/notes/CSCB09/Week-10/>Week 10</a></li><li><a href=/notes/CSCB09/Week-11/>Week 11</a></li></ul></li><li><input type=checkbox id=section-83878c136730e7fb5606682d9ae45dfe class=toggle>
<label for=section-83878c136730e7fb5606682d9ae45dfe class=flex><a href=/notes/CSCC01/ class=flex-auto>CSCC01</a></label><ul><li><a href=/notes/CSCC01/final-review/>Final Review</a></li></ul></li><li><input type=checkbox id=section-d311fefcc209fce910ef2e1c0a1fd052 class=toggle>
<label for=section-d311fefcc209fce910ef2e1c0a1fd052 class=flex><a href=/notes/CSCC24/ class=flex-auto>CSCC24</a></label><ul><li><a href=/notes/CSCC24/Week-1/>Week 1</a></li><li><a href=/notes/CSCC24/Week-2/>Week 2</a></li><li><a href=/notes/CSCC24/Week-3/>Week 3</a></li><li><a href=/notes/CSCC24/Week-4/>Week 4</a></li><li><a href=/notes/CSCC24/Week-5/>Week 5</a></li><li><a href=/notes/CSCC24/Week-6/>Week 6</a></li><li><a href=/notes/CSCC24/Week-7/>Week 7</a></li><li><a href=/notes/CSCC24/Week-8/>Week 8</a></li><li><a href=/notes/CSCC24/Week-9/>Week 9</a></li><li><a href=/notes/CSCC24/Week-10/>Week 10</a></li></ul></li><li><input type=checkbox id=section-a71f1103b1bf523367e6db76cc50f6a6 class=toggle>
<label for=section-a71f1103b1bf523367e6db76cc50f6a6 class=flex><a href=/notes/CSCC43/ class=flex-auto>CSCC43</a></label><ul><li><a href=/notes/CSCC43/final-review/>Final Review</a></li></ul></li><li><input type=checkbox id=section-45f38cf9287c788a19429c70038c2def class=toggle>
<label for=section-45f38cf9287c788a19429c70038c2def class=flex><a href=/notes/CSCC69/ class=flex-auto>CSCC69</a></label><ul><li><a href=/notes/CSCC69/final-review/>Final Review</a></li></ul></li></ul><ul><li><a href=https://github.com/navn-r/notes target=_blank rel=noopener>Github Repo</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/notes/svg/menu.svg class=book-icon alt=Menu></label><h3>Week 4</h3><label for=toc-control><img src=/notes/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#shell-scripting>Shell Scripting</a><ul><li><a href=#running-scripts>Running Scripts</a></li><li><a href=#positional-parameters>Positional Parameters</a></li><li><a href=#example-script>Example Script</a></li><li><a href=#exit><code>exit</code></a></li><li><a href=#functions>Functions</a></li><li><a href=#feeding-multi-line-text-into-stdin>Feeding multi-line text into <code>stdin</code></a></li><li><a href=#command-substitution>Command Substitution</a></li><li><a href=#environment-variables>Environment Variables</a></li></ul></li><li><a href=#file-attributes>File Attributes</a><ul><li><a href=#general-attributes>General Attributes</a></li><li><a href=#unix-account-organization>Unix Account Organization</a></li><li><a href=#permission-flags>Permission Flags</a></li><li><a href=#find><code>find</code></a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=week-4>Week 4
<a class=anchor href=#week-4>#</a></h1><h2 id=shell-scripting>Shell Scripting
<a class=anchor href=#shell-scripting>#</a></h2><h3 id=running-scripts>Running Scripts
<a class=anchor href=#running-scripts>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sh myscript
</span></span></code></pre></div><p>Alternatively, in your <code>myscript.sh</code> file, do the following</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#! /bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>chmod u+x myscript <span style=color:#75715e># sets &#39;executable&#39; flag on the file</span>
</span></span></code></pre></div><p>and run it with&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ./myscript
</span></span></code></pre></div><h3 id=positional-parameters>Positional Parameters
<a class=anchor href=#positional-parameters>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ./myscript foo bar baz <span style=color:#75715e># come after filename, spaced</span>
</span></span></code></pre></div><ul><li><code>$#</code>: Number of arguments (3)</li><li><code>$n</code>: Parameter name (<code>n</code> is the number)<ul><li>eg. <code>$1 = "foo"</code></li></ul></li><li><code>$*</code>: One string with all parameter names<ul><li><code>"foo bar baz"</code></li></ul></li><li><code>$@</code>: Comma seperated strings for each parameter name<ul><li><code>"foo", "bar", "baz"</code></li></ul></li><li><code>shift</code>: Shifts Positional Parameters by 1<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$# <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>$1 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;bar&#34;</span>
</span></span><span style=display:flex><span>$2 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;baz&#34;</span>
</span></span><span style=display:flex><span>$* <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;bar baz&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># good for looping over parameters</span>
</span></span></code></pre></div></li></ul><h3 id=example-script>Example Script
<a class=anchor href=#example-script>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#! /bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>chmod u+x pydelete <span style=color:#75715e># sets exec flag on pydelete.sh</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dryrun<span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>verbose<span style=color:#f92672>=</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#f92672>[</span> $# -gt <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>do</span> <span style=color:#75715e># while the number of params &gt; 0</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> in <span style=color:#75715e># takes the first parameter/argument</span>
</span></span><span style=display:flex><span>    -n<span style=color:#f92672>)</span> <span style=color:#75715e># if the argument is -n</span>
</span></span><span style=display:flex><span>      dryrun<span style=color:#f92672>=</span>y <span style=color:#75715e># sets the program as a dryrun &#34;doesnt actually delete files&#34;</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>    -v<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      verbose<span style=color:#f92672>=</span>y <span style=color:#75715e># sets the program as verbose &#34;deletes verbosely&#34;</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>    *<span style=color:#f92672>)</span> <span style=color:#75715e># as soon as there is another different parameter, the while loop breaks</span>
</span></span><span style=display:flex><span>      break
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>esac</span> <span style=color:#75715e># end of case</span>
</span></span><span style=display:flex><span>  shift <span style=color:#75715e># basically $# -= 1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span> <span style=color:#75715e># end of while</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> f in <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span> ; <span style=color:#66d9ef>do</span> <span style=color:#75715e># for each parameter (after remove the arguments)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span>$f<span style=color:#e6db74>&#34;</span> in <span style=color:#75715e># begins case</span>
</span></span><span style=display:flex><span>    *.py<span style=color:#f92672>)</span> <span style=color:#75715e># if the file is .py extension</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[</span> -n <span style=color:#e6db74>&#34;</span>$verbose<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;deleting </span>$f<span style=color:#e6db74>&#34;</span> <span style=color:#75715e># if user used `-v`</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$dryrun<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> rm <span style=color:#e6db74>&#34;</span>$f<span style=color:#e6db74>&#34;</span> <span style=color:#75715e># if user did not use `-n`, then it will delete</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>    *<span style=color:#f92672>)</span> <span style=color:#75715e># any other file extension</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>[</span> -n <span style=color:#e6db74>&#34;</span>$verbose<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;not deleting </span>$f<span style=color:#e6db74>&#34;</span> <span style=color:#75715e># if the user set verbose</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>esac</span> <span style=color:#75715e># end of case</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span> <span style=color:#75715e># end of for</span>
</span></span></code></pre></div><h3 id=exit><code>exit</code>
<a class=anchor href=#exit>#</a></h3><ul><li>Terminates script and/or shell process</li><li>Useful for:<ul><li>Early exit</li><li>Non-zero exit codes: <code>exit 1</code></li></ul></li></ul><h3 id=functions>Functions
<a class=anchor href=#functions>#</a></h3><ul><li>Example definition<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>myfunc<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;Hot diggity dog&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></li><li>Example function call<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>myfunc foo bar baz <span style=color:#75715e># positional parameters are now function arguments</span>
</span></span></code></pre></div></li><li>Returning<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>return</span>    <span style=color:#75715e># early return</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>  <span style=color:#75715e># with exit code</span>
</span></span></code></pre></div></li><li>Variable Scopes<ul><li>Local variables<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>myfunc<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  local x y z
</span></span><span style=display:flex><span>  x<span style=color:#f92672>=</span><span style=color:#ae81ff>69</span>
</span></span><span style=display:flex><span>  y<span style=color:#f92672>=</span><span style=color:#ae81ff>351</span>
</span></span><span style=display:flex><span>  z<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>expr $x + $y<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>  echo $z
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></li><li>Dynamic Scoping<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat myscript
</span></span><span style=display:flex><span>x<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>printnum<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  local x
</span></span><span style=display:flex><span>  echo $x
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>func1<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  local x
</span></span><span style=display:flex><span>  x<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  printnum
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>func2<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  local x
</span></span><span style=display:flex><span>  x<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  printnum
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>func1 ; func2
</span></span><span style=display:flex><span>$ sh myscript
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> <span style=color:#75715e># from func1</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span> <span style=color:#75715e># from func2</span>
</span></span></code></pre></div></li></ul></li></ul><h3 id=feeding-multi-line-text-into-stdin>Feeding multi-line text into <code>stdin</code>
<a class=anchor href=#feeding-multi-line-text-into-stdin>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat <span style=color:#e6db74>&lt;&lt; EOF # could be any string
</span></span></span><span style=display:flex><span><span style=color:#e6db74>﹥Hi I&#39;m Navinn
</span></span></span><span style=display:flex><span><span style=color:#e6db74>﹥Variables also work \$x=$x
</span></span></span><span style=display:flex><span><span style=color:#e6db74>﹥EOF</span> <span style=color:#75715e># tells shell its the end of file</span>
</span></span><span style=display:flex><span>Hi I<span style=color:#960050;background-color:#1e0010>&#39;</span>m Navinn
</span></span><span style=display:flex><span>Variables also work $x<span style=color:#f92672>=</span><span style=color:#ae81ff>42069</span>
</span></span></code></pre></div><ul><li>if end-marker is declared in quotes, <code>$</code> is no longer special.</li></ul><h3 id=command-substitution>Command Substitution
<a class=anchor href=#command-substitution>#</a></h3><ul><li>Run a command and take its <code>stdout</code> in-place<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#66d9ef>$(</span>cat myfile<span style=color:#66d9ef>)</span> ; <span style=color:#66d9ef>do</span> 
</span></span><span style=display:flex><span><span style=color:#75715e># if wrapped in double-quotes, `cat myfile` is just one string instead of multiple</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div></li></ul><h3 id=environment-variables>Environment Variables
<a class=anchor href=#environment-variables>#</a></h3><ul><li>Every process has a collection of environment variables<ul><li>eg. <code>PATH, CLASSPATH, USER, PWD, PS1</code> etc.</li><li>Convention is all caps</li><li>Same syntax: eg. <code>$PATH, PATH=...</code></li></ul></li><li><code>printenv</code>: prints current env. vars.<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ printenv
</span></span><span style=display:flex><span>HOME<span style=color:#f92672>=</span>/Users/home
</span></span><span style=display:flex><span>PWD<span style=color:#f92672>=</span>/Users/home/desktop
</span></span><span style=display:flex><span>PATH<span style=color:#f92672>=</span>/usr/local/cms/jdk1.8.0_31/bin:/usr/bin:/bin <span style=color:#75715e># colon-seperated list of directories</span>
</span></span><span style=display:flex><span>ANDROID_HOME<span style=color:#f92672>=</span>/Users/home/Library/Android/sdk
</span></span><span style=display:flex><span>SHELL<span style=color:#f92672>=</span>/bin/bash
</span></span><span style=display:flex><span>...
</span></span></code></pre></div></li><li>Creating a new env. var. is <em>different</em><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>LOGNAME<span style=color:#f92672>=</span>navn          <span style=color:#75715e># same init</span>
</span></span><span style=display:flex><span>export LOGNAME        <span style=color:#75715e># different</span>
</span></span><span style=display:flex><span>export LOGNAME<span style=color:#f92672>=</span>navinn <span style=color:#75715e># alt</span>
</span></span></code></pre></div></li></ul><h2 id=file-attributes>File Attributes
<a class=anchor href=#file-attributes>#</a></h2><h3 id=general-attributes>General Attributes
<a class=anchor href=#general-attributes>#</a></h3><ul><li>Size</li><li>Type</li><li>Last modified time</li><li>Last access time</li><li>Last change time</li><li>Owning user</li><li>Owning group
&mldr;</li></ul><h3 id=unix-account-organization>Unix Account Organization
<a class=anchor href=#unix-account-organization>#</a></h3><p>Two main accounts: <code>user</code>, <code>groups</code></p><ul><li><code>user</code>: the user (<code>home</code>, <code>navinn</code> etc.)</li><li><code>groups</code>: A user can be in multiple groups<ul><li><code>groups</code> command displays which groups the current user is in</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ groups
</span></span><span style=display:flex><span>staff everyone localaccounts _appserverusr admin <span style=color:#75715e># ...</span>
</span></span></code></pre></div></li></ul><h3 id=permission-flags>Permission Flags
<a class=anchor href=#permission-flags>#</a></h3><ul><li><p>Each file is assigned one owning user and one owning group. Default is the user who created it and their default group</p><ul><li>Permissions: take the form <code>rwxrwxrwx</code><ul><li><code>r</code>: read</li><li><code>w</code>: write</li><li><code>x</code>: execute</li></ul></li><li>File permission notation<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ls -l
</span></span><span style=display:flex><span>rwxr-x--x <span style=color:#ae81ff>1</span> home  staff  <span style=color:#ae81ff>73966</span>  <span style=color:#ae81ff>1</span> Jun 23:07  myscript.sh
</span></span><span style=display:flex><span><span style=color:#75715e># perms.    user  group  bytes  date_created name</span>
</span></span><span style=display:flex><span><span style=color:#75715e># rwxr-x--x: user gets `rwx`, users in group get `x`, other users get `x` </span>
</span></span></code></pre></div></li></ul></li><li><p>For directories:</p><ul><li><code>r</code>: list files in the dir <code>ls</code></li><li><code>w</code>: add, delete, modify files in the dir</li><li><code>x</code>: <code>cd</code> into dir., use paths mentioning dir</li></ul></li><li><p>To Check Perms on a file/dir:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span> -r path <span style=color:#f92672>]</span> <span style=color:#75715e># exists and readable by current user</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> -w path <span style=color:#f92672>]</span> <span style=color:#75715e># exists and writable</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> -x path <span style=color:#f92672>]</span> <span style=color:#75715e># exists and executable</span>
</span></span></code></pre></div></li><li><p>Changing Ownership/Permission</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chown user path1 path2        <span style=color:#75715e># changes the owning user for both paths</span>
</span></span><span style=display:flex><span>chown user:group path1 path2  <span style=color:#75715e># changes owning user and owning group</span>
</span></span><span style=display:flex><span>chown :group path1 path2      <span style=color:#75715e># changes group</span>
</span></span><span style=display:flex><span>chmod u<span style=color:#f92672>=</span>rw,g<span style=color:#f92672>=</span>r,o<span style=color:#f92672>=</span> path1 path2 <span style=color:#75715e># changes specific perms (u=user, g=group, o=other)</span>
</span></span></code></pre></div><h3 id=find><code>find</code>
<a class=anchor href=#find>#</a></h3><p>Literally finds a path and operates on selected files with automatic recursion</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ find path ...expression
</span></span></code></pre></div><p><em>For each given path, recurse down and pick out a file based on the expression</em></p><p>eg. Find python files, print their path, then delete</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ find . -name ’*.py’ -exec rm ’<span style=color:#f92672>{}</span>’ ’;’ -print
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#shell-scripting>Shell Scripting</a><ul><li><a href=#running-scripts>Running Scripts</a></li><li><a href=#positional-parameters>Positional Parameters</a></li><li><a href=#example-script>Example Script</a></li><li><a href=#exit><code>exit</code></a></li><li><a href=#functions>Functions</a></li><li><a href=#feeding-multi-line-text-into-stdin>Feeding multi-line text into <code>stdin</code></a></li><li><a href=#command-substitution>Command Substitution</a></li><li><a href=#environment-variables>Environment Variables</a></li></ul></li><li><a href=#file-attributes>File Attributes</a><ul><li><a href=#general-attributes>General Attributes</a></li><li><a href=#unix-account-organization>Unix Account Organization</a></li><li><a href=#permission-flags>Permission Flags</a></li><li><a href=#find><code>find</code></a></li></ul></li></ul></nav></div></aside></main><link rel=stylesheet href=/notes/katex/katex.min.css><script defer src=/notes/katex/katex.min.js></script><script defer src=/notes/katex/auto-render.min.js onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})'></script></body></html>